<UserControl x:Class="jpmc_genai.FluxSidebar"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             mc:Ignorable="d"
             d:DesignHeight="800" d:DesignWidth="240">

    <UserControl.Resources>
        <!-- Sidebar Button Style (Hover Glow) -->
        <Style TargetType="Button" x:Key="SidebarButton">
            <Setter Property="Background" Value="#FFF6EC"/>
            <Setter Property="Foreground" Value="#333333"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Width" Value="150"/>
            <Setter Property="Height" Value="34"/>
            <Setter Property="Margin" Value="0,0,0,12"/>
            <Setter Property="BorderBrush" Value="#D4AF37"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border"
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="10">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#D4AF37"/>
                                <Setter TargetName="border" Property="Effect">
                                    <Setter.Value>
                                        <DropShadowEffect Color="#D4AF37" BlurRadius="12" ShadowDepth="0" Opacity="0.4"/>
                                    </Setter.Value>
                                </Setter>
                                <Setter Property="Foreground" Value="White"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Active Button Style (Gold Bottom Border) -->
        <Style TargetType="Button" x:Key="ActiveSidebarButton" BasedOn="{StaticResource SidebarButton}">
            <Setter Property="Foreground" Value="#D4AF37"/>
            <Setter Property="IsEnabled" Value="False"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="#FFF6EC"
                                BorderBrush="#D4AF37"
                                BorderThickness="0,0,0,3"
                                CornerRadius="10">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Project Card Style -->
        <Style TargetType="Border" x:Key="ProjectCard">
            <Setter Property="Background" Value="White"/>
            <Setter Property="CornerRadius" Value="12"/>
            <Setter Property="BorderBrush" Value="#E2E1DC"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="18"/>
            <Setter Property="Margin" Value="15,20"/>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect BlurRadius="10" Opacity="0.15" ShadowDepth="2"/>
                </Setter.Value>
            </Setter>
        </Style>
    </UserControl.Resources>

    <Border Background="#F8F6F2"
            BorderBrush="#D4AF37"
            BorderThickness="0,0,2,0"
            CornerRadius="0,18,18,0">
        <Border.Effect>
            <DropShadowEffect BlurRadius="18" ShadowDepth="3" Opacity="0.18"/>
        </Border.Effect>

        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Header -->
            <Border Background="#D4AF37" CornerRadius="0,18,0,0" Padding="18">
                <TextBlock Text="JPMC Flux"
                           Foreground="White"
                           FontSize="22"
                           FontWeight="Bold"
                           HorizontalAlignment="Center"/>
            </Border>

            <!-- Navigation -->
            <StackPanel Grid.Row="1" Margin="20,25,20,10">
                <Button Content=" Project Dashboard"
                        Style="{StaticResource ActiveSidebarButton}"/>

                <Button Content="Manage Test Case"
                        Style="{StaticResource SidebarButton}"
                        Command="{Binding NavigateCommand}"
                        CommandParameter="UploadTestCase"/>

                <Button Content="Smart Executor"
                        Style="{StaticResource SidebarButton}"
                        Command="{Binding NavigateCommand}"
                        CommandParameter="AITestExecutor"/>

                <Button Content="Script Generator"
                        Style="{StaticResource SidebarButton}"
                        Command="{Binding NavigateCommand}"
                        CommandParameter="ScriptGenerator"/>

                <Button Content="Execution Log"
                        Style="{StaticResource SidebarButton}"
                        Command="{Binding NavigateCommand}"
                        CommandParameter="ExecutionLog"/>
            </StackPanel>

            <!-- Project Card -->
            <Border Grid.Row="2" Style="{StaticResource ProjectCard}">
                <StackPanel>
                    <TextBlock x:Name="ProjectTitleTextBlock"
                               Text="Loading..."
                               Foreground="#333"
                               FontWeight="Bold"
                               FontSize="20"
                               Margin="0,0,0,5"/>

                    <TextBlock x:Name="ProjectDetailsTextBlock"
                               Text="Select a project"
                               Foreground="#8C8575"
                               FontSize="11"/>

                    <Button Content="Change Project"
                            Style="{StaticResource SidebarButton}"
                            Command="{Binding NavigateCommand}"
                            CommandParameter="ChangeProject"
                            Margin="0,10,0,0"/>
                </StackPanel>
            </Border>
        </Grid>
    </Border>
</UserControl>
