<Window x:Class="JPMCGenAI_v1._0.EditTestCaseWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Edit Test Case Steps"
        Height="720" Width="1000"
        Background="#FAF9F6"
        WindowStartupLocation="CenterOwner"
        ResizeMode="CanResize"
        FontFamily="Segoe UI">

    <Window.Resources>
        <!-- JPMC Flux Gold -->
        <SolidColorBrush x:Key="Gold" Color="#D4AF37"/>
        <SolidColorBrush x:Key="LightGold" Color="#FFF8F0"/>
        <SolidColorBrush x:Key="DarkText" Color="#333333"/>
        <SolidColorBrush x:Key="BorderBrush" Color="#E2E1DC"/>

        <!-- Modern Button Styles -->
        <Style x:Key="GoldButton" TargetType="Button">
            <Setter Property="Background" Value="#D4AF37"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Padding" Value="20,12"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" CornerRadius="14">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#B8952D"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="RedButton" TargetType="Button" BasedOn="{StaticResource GoldButton}">
            <Setter Property="Background" Value="#E74C3C"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#C0392B"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <Style x:Key="CancelButton" TargetType="Button">
            <Setter Property="Background" Value="#999999"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Padding" Value="20,12"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" CornerRadius="14">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#777777"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Clean DataGrid -->
        <Style TargetType="DataGrid">
            <Setter Property="Background" Value="White"/>
            <Setter Property="BorderBrush" Value="#E2E1DC"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="RowBackground" Value="White"/>
            <Setter Property="AlternatingRowBackground" Value="#FFFBF5"/>
            <Setter Property="GridLinesVisibility" Value="Horizontal"/>
            <Setter Property="HorizontalGridLinesBrush" Value="#EEEEEE"/>
            <Setter Property="HeadersVisibility" Value="Column"/>
            <Setter Property="ColumnHeaderHeight" Value="48"/>
            <Setter Property="RowHeight" Value="50"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="CanUserAddRows" Value="False"/>
            <Setter Property="CanUserDeleteRows" Value="False"/>
        </Style>

        <Style TargetType="DataGridColumnHeader">
            <Setter Property="Background" Value="#FFF8F0"/>
            <Setter Property="Foreground" Value="#D4AF37"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Padding" Value="16,0"/>
            <Setter Property="BorderBrush" Value="#E2E1DC"/>
            <Setter Property="BorderThickness" Value="0,0,0,1"/>
        </Style>

        <Style TargetType="DataGridCell">
            <Setter Property="Padding" Value="16,0"/>
            <Style.Triggers>
                <Trigger Property="IsSelected" Value="True">
                    <Setter Property="Background" Value="#FFF0E0"/>
                    <Setter Property="BorderBrush" Value="#D4AF37"/>
                </Trigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>

    <!-- Main Card with Shadow -->
    <Border Margin="28" Background="White" CornerRadius="24" BorderBrush="#E2E1DC" BorderThickness="1">
        <Border.Effect>
            <DropShadowEffect BlurRadius="30" Opacity="0.15" ShadowDepth="10"/>
        </Border.Effect>

        <Grid Margin="36">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Title (Test Case ID) -->
            <TextBlock x:Name="IdLbl"
                       Grid.Row="0"
                       FontSize="28"
                       FontWeight="Bold"
                       Foreground="#D4AF37"
                       Margin="0,0,0,20"/>

            <!-- Add / Delete Buttons -->
            <StackPanel Grid.Row="1" Orientation="Horizontal" Margin="0,0,0,24">
                <Button Content="Add Step"
                        Style="{StaticResource GoldButton}"
                        Width="160"
                        Click="AddStep_Click"/>
                <Button Content="Delete Selected Step"
                        Style="{StaticResource RedButton}"
                        Width="180"
                        Margin="12,0,0,0"
                        Click="DeleteStep_Click"/>
            </StackPanel>

            <!-- Steps Table -->
            <Border Grid.Row="2" 
                    Background="White" 
                    CornerRadius="18" 
                    BorderBrush="#E2E1DC" 
                    BorderThickness="1">
                <DataGrid x:Name="StepsGrid"
                          AutoGenerateColumns="False">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="Step Description"
                                            Binding="{Binding Step}"
                                            Width="2*"/>
                        <DataGridTextColumn Header="Test Data / Parameters"
                                            Binding="{Binding TestDataText}"
                                            Width="1.2*"/>
                    </DataGrid.Columns>
                </DataGrid>
            </Border>

            <!-- Footer Buttons -->
            <StackPanel Grid.Row="3" 
                        Orientation="Horizontal" 
                        HorizontalAlignment="Right" 
                        Margin="0,32,0,8">
                <Button Content="Save Changes"
                        Style="{StaticResource GoldButton}"
                        Width="160"
                        Click="Save_Click"/>
                <Button Content="Cancel"
                        Style="{StaticResource CancelButton}"
                        Width="140"
                        Margin="12,0,0,0"
                        Click="Cancel_Click"/>
            </StackPanel>
        </Grid>
    </Border>
</Window>
